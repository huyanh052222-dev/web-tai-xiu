<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T√†i X·ªâu Vui V·∫ª</title>
    
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #2c3e50; /* M√†u g·ªëc */
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            transition: background-color 0.5s ease;
        }

        /* Class ƒë·ªïi m√†u n·ªÅn */
        body.bg-win { 
            background-color: #27ae60; 
        }
        body.bg-lose { 
            background-color: #c0392b; 
        }
        body.bg-bao { 
            background-color: #8e44ad; 
        }

        .container {
            background-color: rgba(52, 73, 94, 0.9);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            text-align: center;
            width: 90%;
            max-width: 500px;
        }

        h1 {
            color: #f1c40f;
            margin-bottom: 10px;
        }

        .score-board {
            font-size: 24px;
            margin-bottom: 20px;
            background: #2c3e50;
            padding: 10px;
            border-radius: 8px;
            border: 2px solid #f1c40f;
        }

        .dice-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            font-size: 80px;
            height: 100px;
        }

        .dice {
            color: #ecf0f1;
        }

        .rolling {
            animation: roll-shake 0.3s infinite;
        }
        @keyframes roll-shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            25% { transform: translate(-1px, -2px) rotate(-1deg); }
            50% { transform: translate(-3px, 0px) rotate(1deg); }
            75% { transform: translate(3px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -1px) rotate(1deg); }
        }

        .bounce {
            animation: bounce-anim 0.6s ease infinite;
        }
        @keyframes bounce-anim {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .shake-horizontal {
            animation: horizontal-shake 0.4s ease infinite;
        }
        @keyframes horizontal-shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .spin-bao {
            animation: spin 1s linear infinite;
            color: #f1c40f;
        }
        @keyframes spin {
            100% { transform: rotate(360deg); }
        }

        .buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-bottom: 20px;
        }

        button {
            padding: 15px 30px;
            font-size: 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.2s, transform 0.1s;
        }
        button:active { transform: scale(0.95); }

        button:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-xiu {
            background-color: #3498db;
            color: white;
        }
        .btn-xiu:hover { background-color: #2980b9; }

        .btn-tai {
            background-color: #e74c3c;
            color: white;
        }
        .btn-tai:hover { background-color: #c0392b; }

        .result-message {
            font-size: 20px;
            font-weight: bold;
            min-height: 30px;
            margin-top: 20px;
        }

        .win { color: #2ecc71; text-shadow: 1px 1px 0 #000; }
        .lose { color: #e74c3c; text-shadow: 1px 1px 0 #000; }
        .bao { color: #f1c40f; text-shadow: 1px 1px 0 #000; font-size: 24px; }

        .history {
            margin-top: 20px;
            font-size: 14px;
            color: #bdc3c7;
            text-align: left;
            border-top: 1px solid #7f8c8d;
            padding-top: 10px;
        }

        @media (max-width: 600px) {
            .container {
                box-sizing: border-box;
                padding: 20px 15px;
                width: 85%;
            }

            h1 { font-size: 24px; }

            .dice-container {
                font-size: 60px;
                gap: 10px;
                height: 70px;
                margin: 15px 0;
            }

            .buttons {
                gap: 10px;
            }

            button {
                padding: 12px 10px;
                font-size: 16px;
                border-radius: 8px;
            }

            .score-board {
                font-size: 20px;
                padding: 8px;
            }

            .result-message {
                font-size: 18px;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>T√ÄI X·ªàU VUI V·∫∫</h1>
        <p style="font-size: 14px; color: #bdc3c7;">(Just for fun)</p>
        
        <div class="score-board">
            ƒêi·ªÉm c·ªßa b·∫°n: <span id="score">100 coin v·ªën</span>
        </div>

        <div class="dice-container" id="diceContainer">
            <div class="dice" id="dice1">‚öÄ</div>
            <div class="dice" id="dice2">‚öÅ</div>
            <div class="dice" id="dice3">‚öÇ</div>
        </div>

        <div class="result-message" id="message">C·∫©n th·∫≠n l·ª±a ch·ªçn üòà</div>

        <div class="buttons">
            <button class="btn-xiu" id="btnXiu" onclick="playGame('xiu')">X·ªàU<br><small>(4 - 10)</small></button>
            <button class="btn-tai" id="btnTai" onclick="playGame('tai')">T√ÄI<br><small>(11 - 17)</small></button>
        </div>

        <div class="history">
            <strong>L∆∞·ª£t ch∆°i:</strong> <span id="turnCount">0</span>
        </div>
    </div>

    <script>
        let score = 100;
        let turnCount = 0;
        const diceChars = ['‚öÄ', '‚öÅ', '‚öÇ', '‚öÉ', '‚öÑ', '‚öÖ'];

        const diceElements = [
            document.getElementById('dice1'),
            document.getElementById('dice2'),
            document.getElementById('dice3')
        ];
        const scoreEl = document.getElementById('score');
        const messageEl = document.getElementById('message');
        const turnCountEl = document.getElementById('turnCount');
        const btnXiu = document.getElementById('btnXiu');
        const btnTai = document.getElementById('btnTai');

        const body = document.body;

        function randomDice() {
            return Math.floor(Math.random() * 6) + 1;
        }

        function getResultType(total) {
            if (total === 3 || total === 18) return 'bao';
            if (total >= 4 && total <= 10) return 'xiu';
            if (total >= 11 && total <= 17) return 'tai';
            return 'bao';
        }

        function playGame(userChoice) {
            btnXiu.disabled = true;
            btnTai.disabled = true;
            messageEl.innerHTML = "ƒêang l·∫Øc...";
            messageEl.className = "result-message";
            body.classList.remove('bg-win', 'bg-lose', 'bg-bao');
            diceElements.forEach(d => {
                d.classList.remove('bounce', 'shake-horizontal', 'spin-bao');
                d.classList.add('rolling');
            });

            setTimeout(() => {
                turnCount++;
                turnCountEl.innerText = turnCount;
                
                let d1, d2, d3, total, resultType;
                let isWin = false;

                if (turnCount <= 5) {
                    const randomChance = Math.random();
                    const targetWin = randomChance < 0.7;

                    do {
                        d1 = randomDice(); d2 = randomDice(); d3 = randomDice();
                        total = d1 + d2 + d3;
                        resultType = getResultType(total);
                        
                        if (targetWin) {
                            if (resultType === userChoice) break;
                        } else {
                            if (resultType !== userChoice) break;
                        }
                    } while (true);

                } else {
                    d1 = randomDice(); d2 = randomDice(); d3 = randomDice();
                    total = d1 + d2 + d3;
                    resultType = getResultType(total);
                }
                
                diceElements.forEach(d => d.classList.remove('rolling'));
                diceElements[0].innerText = diceChars[d1 - 1];
                diceElements[1].innerText = diceChars[d2 - 1];
                diceElements[2].innerText = diceChars[d3 - 1];

                let resultDisplay = resultType.toUpperCase();
                if (resultType === 'bao') resultDisplay = "B√ÉO";

                if (resultType === 'bao') {
                    let losePoints = 1500; 
                    score -= losePoints;
                    messageEl.innerHTML = `T·ªïng: ${total} - <span class="bao"> ${resultDisplay} coin</span> <br> <span class="lose">Nh√† c√°i ƒÉn h·∫øt (-${losePoints})</span>`;
                    
                    body.classList.add('bg-bao');
                    diceElements.forEach(d => d.classList.add('spin-bao'));
                } 
                else if (userChoice === resultType) {
                    // TH·∫ÆNG
                    let winPoints = Math.floor(Math.random() * (500 - 50 + 1)) + 50;
                    score += winPoints;
                    messageEl.innerHTML = `T·ªïng: ${total} (${resultDisplay}) - <span class="win">B·∫†N TH·∫ÆNG (+${winPoints} coin)</span>`;
                    
                    body.classList.add('bg-win');
                    diceElements.forEach(d => d.classList.add('bounce'));
                } else {
                    // THUA: Tr·ª´ ng·∫´u nhi√™n 300 - 600
                    let losePoints = Math.floor(Math.random() * (600 - 300 + 1)) + 300;
                    score -= losePoints;
                    messageEl.innerHTML = `T·ªïng: ${total} (${resultDisplay}) - <span class="lose">B·∫†N THUA (-${losePoints} coin)</span>`;
                    
                    body.classList.add('bg-lose');
                    diceElements.forEach(d => d.classList.add('shake-horizontal'));
                }

                scoreEl.innerText = `${score} coin`;
                btnXiu.disabled = false;
                btnTai.disabled = false;

            }, 800);
        }
    </script>
</body>
</html>